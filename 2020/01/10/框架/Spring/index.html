

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" type="image/png" href="/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="Jehu Ren">
  <meta name="keywords" content="">
  <title>Spring学习 - Jehu</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.4.0/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"renjiahui.cn","root":"/","version":"1.8.7","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"onlypost":false},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}}};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 4.2.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>Jehu</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" href="javascript:">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="Spring学习">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2020-01-10 00:00" pubdate>
        2020年1月10日 凌晨
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      3.8k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      45
       分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Spring学习</h1>
            
            <div class="markdown-body">
              <h2 id="Spring主要框架"><a href="#Spring主要框架" class="headerlink" title="Spring主要框架"></a>Spring主要框架</h2><p>核心模块：</p>
<ul>
<li><strong>spring-core</strong>模块提供了框架的基本组成部分，包括 IoC 和依赖注入功能。</li>
<li><strong>spring-beans</strong> 模块提供 BeanFactory，工厂模式的微妙实现，它移除了编码式单例的需要，并且可以把配置和依赖从实际编码逻辑中解耦。</li>
<li><strong>context</strong>模块建立在由<strong>core</strong>和 <strong>beans</strong> 模块的基础上建立起来的，它以一种类似于JNDI注册的方式访问对象。Context模块继承自Bean模块，并且添加了国际化（比如，使用资源束）、事件传播、资源加载和透明地创建上下文（比如，通过Servelet容器）等功能。Context模块也支持Java EE的功能，比如EJB、JMX和远程调用等。<strong>ApplicationContext</strong>接口是Context模块的焦点。<strong>spring-context-support</strong>提供了对第三方库集成到Spring上下文的支持，比如缓存（EhCache, Guava, JCache）、邮件（JavaMail）、调度（CommonJ, Quartz）、模板引擎（FreeMarker, JasperReports, Velocity）等。</li>
<li><strong>spring-expression</strong>模块提供了强大的表达式语言，用于在运行时查询和操作对象图。它是JSP2.1规范中定义的统一表达式语言的扩展，支持set和get属性值、属性赋值、方法调用、访问数组集合及索引的内容、逻辑算术运算、命名变量、通过名字从Spring IoC容器检索对象，还支持列表的投影、选择以及聚合等。</li>
</ul>
<h2 id="Spring-容器启动过程"><a href="#Spring-容器启动过程" class="headerlink" title="Spring 容器启动过程"></a>Spring 容器启动过程</h2><ul>
<li><p>1、资源定位：找到配置文件（载入配置文件/Springboot采用自动扫描）</p>
</li>
<li><p>2、BeanDefinition载入和解析（解析成BeanDefiniton）</p>
</li>
<li><p>3、BeanDefinition注册（添加到map(key,Definition)）</p>
</li>
<li><p>4、bean的实例化和依赖注入(getBean()方法进行实例化)</p>
<p>实例化的时间点：</p>
<p>BeanFactory作为工厂类：在第一次使用的时候实例化</p>
<p>applicationContext作为容器：如果为singleton，则在容器启动的时候初始化bean并将bean放在缓存（单例池）中</p>
<p>如果为singleton，并且设置lazy-init(延迟加载)为true，则在第一次使用的时候实例化bean</p>
<p>如果为prototype</p>
</li>
</ul>
<h2 id="Spring-主要功能"><a href="#Spring-主要功能" class="headerlink" title="Spring 主要功能"></a>Spring 主要功能</h2><h2 id="IOC"><a href="#IOC" class="headerlink" title="IOC"></a>IOC</h2><p><strong>IOC</strong>: 控制反转<br>即控制权的转移，将我们创建对象的方式反转了,以前对象的创建是由我们开发人员自己维护,包括依赖关系也是自己注入。使用了spring之后，对象的创建以及依赖关系可以由spring完成创建以及注入，反转控制就是反转了对象的创建方式，从我们自己创建反转给了程序创建(spring)</p>
<p><strong>DI</strong>:  Dependency Injection  依赖注入<br>spring这个容器中，替你管理着一系列的类，前提是你需要将这些类交给spring容器进行管理，然后在你需要的时候，不是自己去定义，而是直接向spring容器索取，当spring容器知道你的需求之后，就会去它所管理的组件中进行查找，然后直接给你所需要的组件.<br>实现IOC思想需要DI做支持。<br>注入方式:   1.set方式注入    2.构造方法注入   3.字段注入<br>注入类型:   1.值类型注入      2.引用类型注入</p>
<p><strong>IOC 容器</strong></p>
<p>具有依赖注入功能的容器，它可以创建对象，IOC 容器负责实例化、定位、配置应用程序中的对象及建立这些对象间的依赖。是Spring框架的核心。Spring提供了两种不同的容器：Spring BeanFactory 容器（它是最简单的容器，给 DI 提供了基本的支持）和Spring ApplicationContext 容器（该容器添加了更多的企业特定的功能，例如从一个属性文件中解析文本信息的能力，发布应用程序事件给感兴趣的事件监听器的能力。）。</p>
<p><strong>对象的创建时间</strong>：正常在容器初始化的时候进行创建，设置了lazy-init时，在getbean的时候进行创建。</p>
<h4 id="Spring-BeanFactory-容器"><a href="#Spring-BeanFactory-容器" class="headerlink" title="Spring BeanFactory 容器"></a>Spring BeanFactory 容器</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//在Bean中配置bean的内容</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainApp</span> </span>&#123;<br>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>      XmlBeanFactory factory = <span class="hljs-keyword">new</span> XmlBeanFactory<br>                             (<span class="hljs-keyword">new</span> ClassPathResource(<span class="hljs-string">"Beans.xml"</span>));<br>       <span class="hljs-comment">//使用ClassPathResource去读取XML文件，再调用XmlBeanFactory去生成BeanFactory</span><br>      HelloWorld obj = (HelloWorld) factory.getBean(<span class="hljs-string">"helloWorld"</span>);<span class="hljs-comment">//获取bean对象</span><br>      obj.getMessage();<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>Application Context 是 BeanFactory 的子接口，也被成为 Spring 上下文。</p>
<p>Application Context 是 spring 中较高级的容器。ApplicationContext 包含 BeanFactory 所有的功能。</p>
<ul>
<li><strong>FileSystemXmlApplicationContext</strong>：该容器从 XML 文件中加载已被定义的 bean。在这里，你需要提供给构造器 XML 文件的完整路径。</li>
<li><strong>ClassPathXmlApplicationContext</strong>：该容器从 XML 文件中加载已被定义的 bean。在这里，你不需要提供 XML 文件的完整路径，只需正确配置 CLASSPATH 环境变量即可，因为，容器会从 CLASSPATH 中搜索 bean 配置文件。</li>
<li><strong>WebXmlApplicationContext</strong>：该容器会在一个 web 应用程序的范围内加载在 XML 文件中已被定义的 bean。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**<br>第一步生成工厂对象。加载完指定路径下 bean 配置文件后，利用框架提供的 FileSystemXmlApplicationContext API 去生成工厂 bean。FileSystemXmlApplicationContext 负责生成和初始化所有的对象，比如，所有在 XML bean 配置文件中的 bean。<br><br>第二步利用第一步生成的上下文中的 getBean() 方法得到所需要的 bean。 这个方法通过配置文件中的 bean ID 来返回一个真正的对象。一旦得到这个对象，就可以利用这个对象来调用任何方法。<br>*/</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainApp</span> </span>&#123;<br>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>      ApplicationContext context = <span class="hljs-keyword">new</span> FileSystemXmlApplicationContext<br>            (<span class="hljs-string">"Beans.xml"</span>);<br>      HelloWorld obj = (HelloWorld) context.getBean(<span class="hljs-string">"helloWorld"</span>);<br>      obj.getMessage();<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="Spring-配置元数据"><a href="#Spring-配置元数据" class="headerlink" title="Spring 配置元数据"></a>Spring 配置元数据</h4><p>配置元数据：bean 定义包含称为<strong>配置元数据</strong>的信息，下述容器也需要知道配置元数据：</p>
<ul>
<li>如何创建一个 bean</li>
<li>bean 的生命周期的详细信息</li>
<li>bean 的依赖关系</li>
</ul>
<p>提供配置元数据给Spring的方法：</p>
<ul>
<li>基于 XML 的配置文件</li>
<li>基于注解的配置</li>
<li>基于 Java 的配置</li>
</ul>
<h4 id="Spring-bean作用域："><a href="#Spring-bean作用域：" class="headerlink" title="Spring bean作用域："></a><strong>Spring bean作用域：</strong></h4><p>singleton(容器中只有一个实例存在，单例模式实现)，prototype(每次都返回一个新的实例)，request(每次Http请求创建新的bean)，session(同一个HTTP Session共享一个Bean，不同Session使用不同的Bean),global-session(global session作用域类似于标准的HTTP Session作用域，不过它仅仅在基于portlet的web应用中才有意义。)，默认为singleton，可采用@Scope注解或者xml里面的scope属性进行修改。</p>
<p><strong>Bean生命周期</strong></p>
<p>Bean的生命周期可以表达为：Bean的定义——Bean的初始化——Bean的使用——Bean的销毁</p>
<p>在bean初始化前后进行操作<br>第一种：通过@PostConstruct 和 @PreDestroy 方法 实现初始化和销毁bean之前进行的操作<br>第二种是：通过 在xml中定义init-method 和  destory-method方法<br>第三种是： 通过bean实现InitializingBean和 DisposableBean接口</p>
<p>Constructor &gt; @PostConstruct &gt; InitializingBean &gt; init-method</p>
<p><strong>后置处理器</strong></p>
<p>BeanPostProcessor,实现postProcessBeforeInitialization和postProcessAfterInitialization方法来实现bean初始化之前和之后的逻辑。</p>
<h4 id="beanFactory-和FactoryBean"><a href="#beanFactory-和FactoryBean" class="headerlink" title="beanFactory 和FactoryBean"></a>beanFactory 和FactoryBean</h4><p>beanFactory是Spring容器的一个组件，负责来构建Bean的一个工厂，而FactoryBean则表示，要创建的这个bean是一个工厂类，用来生产其他bean的。</p>
<h4 id="依赖注入方式"><a href="#依赖注入方式" class="headerlink" title="依赖注入方式"></a>依赖注入方式</h4><p>基于构造函数进行注入</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;!-- Definition for textEditor bean --&gt;<br>&lt;bean id="textEditor" class="com.tutorialspoint.TextEditor"&gt;<br>   &lt;constructor-arg ref="spellChecker"/&gt;<br>&lt;/bean&gt;<br><br>&lt;!-- Definition for spellChecker bean --&gt;<br>&lt;bean id="spellChecker" class="com.tutorialspoint.SpellChecker"&gt;<br>&lt;/bean&gt;<br></code></pre></td></tr></table></figure>

<p>也可以使用p-namespace注入</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;bean id=<span class="hljs-string">"bar"</span> <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">"x.y.Bar"</span>/&gt;<br>&lt;bean id=<span class="hljs-string">"baz"</span> <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">"x.y.Baz"</span>/&gt;<br>&lt;bean id=<span class="hljs-string">"foo"</span> <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">"x.y.Foo"</span> c:bar-ref=<span class="hljs-string">"bar"</span> c:baz-ref=<span class="hljs-string">"baz"</span> c:email=<span class="hljs-string">"foo@bar.com"</span>/&gt;<br></code></pre></td></tr></table></figure>

<p>基于设值函数进行注入</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java">   &lt;!-- Definition for textEditor bean --&gt;<br>   &lt;bean id="textEditor" class="com.tutorialspoint.TextEditor"&gt;<br>      &lt;property name="spellChecker" ref="spellChecker"/&gt;<br>   &lt;/bean&gt;<br>//基于值注入<br>   &lt;!-- Definition for spellChecker bean --&gt;<br>   &lt;bean id="spellChecker" class="com.tutorialspoint.SpellChecker"&gt;<br>   &lt;/bean&gt;<br></code></pre></td></tr></table></figure>

<p>也可以使用p-namespace注入</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;bean id="john-classic" class="com.example.Person"<br>   p:name="John Doe"<br>   p:spouse-ref="jane"/&gt;<br>&lt;/bean&gt;<br><br>&lt;bean name="jane" class="com.example.Person"<br>   p:name="John Doe"/&gt;<br>&lt;/bean&gt;<br></code></pre></td></tr></table></figure>

<h4 id="Spring-中的事件处理"><a href="#Spring-中的事件处理" class="headerlink" title="Spring 中的事件处理"></a>Spring 中的事件处理</h4><p><strong>ContextRefreshedEvent</strong> ApplicationContext 被初始化或刷新时，该事件被发布。这也可以在 ConfigurableApplicationContext 接口中使用 refresh() 方法来发生。<br><strong>ContextStartedEvent</strong>当使用 ConfigurableApplicationContext 接口中的 start() 方法启动 ApplicationContext 时，该事件被发布。你可以调查你的数据库，或者你可以在接受到这个事件后重启任何停止的应用程序。<br><strong>ContextStoppedEvent</strong> 当使用 ConfigurableApplicationContext 接口中的 stop() 方法停止 ApplicationContext 时，发布这个事件。你可以在接受到这个事件后做必要的清理的工作<br> <strong>ContextClosedEvent</strong> 当使用 ConfigurableApplicationContext 接口中的 close() 方法关闭 ApplicationContext 时，该事件被发布。一个已关闭的上下文到达生命周期末端；它不能被刷新或重启。<br><strong>RequestHandledEvent</strong> 这是一个 web-specific 事件，告诉所有 bean HTTP 请求已经被服务。</p>
<p>通过 ApplicationEvent 类和 ApplicationListener 接口来提供在 ApplicationContext 中处理事件。</p>
<p>若Bean实现了ApplicationListener 接口，并注册了，则在对应事件发生时，会通知该bean，即该Bean会监听事件。</p>
<p><strong>自定义事件：</strong>通过继承ApplicationEvent接口自定义事件，同时还需要实现ApplicationEventPublisherAware接口来触发自定义的事件。</p>
<h2 id="AOP"><a href="#AOP" class="headerlink" title="AOP"></a>AOP</h2><p>AOP 即 Aspect Oriented Program 面向切面编程，将相同逻辑的重复代码横向抽取出来，使用动态代理技术将这些重复代码织入到目标对象方法中，实现和原来一样的功能。</p>
<p>AspectJ是<strong>语言级别</strong>的AOP实现，扩展了Java语言，定义了AOP语法，能够在<strong>编译期</strong>提供横切代码的织入，所以它有<strong>专门的编译器</strong>用来生成遵守Java字节码规范的Class文件。</p>
<p><strong>相关术语：</strong></p>
<p>1、<strong>Advice</strong> 表示通知。是切面的具体实现方法：前置增强、后置增强、环绕增强、异常抛出增强、最终增强等类型<br>2、<strong>切入点</strong> 筛选出的连接点<br>3、<strong>连接点</strong> 允许进行通知的地方，方法的前后等<br>4、<strong>切面</strong> 切入点和通知的结合就是切面，在特定的切入点上实现特定的功能。<br>5、<strong>目标对象</strong> 就是要被通知的对象，也就是真正的业务逻辑<br>6、<strong>AOP代理</strong> AOP框架创建的对象，包含通知。<br>7、<strong>织入</strong> 把切面应用到目标对象上构建新的代理对象的过程</p>
<p>Spring提供了3种类型的AOP支持：</p>
<ul>
<li><p>基于代理的经典SpringAOP</p>
<ul>
<li>需要实现接口，手动创建代理（目前已经不建议使用）</li>
</ul>
</li>
<li><p>纯POJO切面</p>
<ul>
<li>使用XML配置，aop命名空间</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;aop:config&gt;<br>   &lt;aop:aspect id="myAspect" ref="aBean"&gt;<br>      &lt;aop:pointcut id="businessService"<br>         expression="execution(* com.xyz.myapp.service.*.*(..))"/&gt;<br>      &lt;!-- a before advice definition --&gt;<br>      &lt;aop:before pointcut-ref="businessService" <br>         method="doRequiredTask"/&gt;<br>      &lt;!-- an after advice definition --&gt;<br>      &lt;aop:after pointcut-ref="businessService" <br>         method="doRequiredTask"/&gt;<br>      &lt;!-- an after-returning advice definition --&gt;<br>      &lt;!--The doRequiredTask method must have parameter named retVal --&gt;<br>      &lt;aop:after-returning pointcut-ref="businessService"<br>         returning="retVal"<br>         method="doRequiredTask"/&gt;<br>      &lt;!-- an after-throwing advice definition --&gt;<br>      &lt;!--The doRequiredTask method must have parameter named ex --&gt;<br>      &lt;aop:after-throwing pointcut-ref="businessService"<br>         throwing="ex"<br>         method="doRequiredTask"/&gt;<br>      &lt;!-- an around advice definition --&gt;<br>      &lt;aop:around pointcut-ref="businessService" <br>         method="doRequiredTask"/&gt;<br>   ...<br>   &lt;/aop:aspect&gt;<br>&lt;/aop:config&gt;<br>&lt;bean id="aBean" class="..."&gt;<br>...<br>&lt;/bean&gt;<br></code></pre></td></tr></table></figure>
</li>
<li><p>@AspectJ注解驱动的切面</p>
<ul>
<li>使用注解的方式，这是最简洁和最方便的！</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//xml文件里开启对应的aspectj注解</span><br>&lt;aop:aspectj-autoproxy/&gt;<br><span class="hljs-comment">//切面逻辑</span><br><span class="hljs-meta">@Aspect</span>  <br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SleepHelper</span> </span>&#123;   <br> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">SleepHelper</span><span class="hljs-params">()</span></span>&#123;         <br> <br>    &#125;   <br>    <br>    <span class="hljs-meta">@Pointcut</span>(<span class="hljs-string">"execution(* *.sleep())"</span>)   <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sleeppoint</span><span class="hljs-params">()</span></span>&#123;&#125;   <br> <br> <br>    <span class="hljs-meta">@Before</span>(<span class="hljs-string">"sleeppoint()"</span>)   <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">beforeSleep</span><span class="hljs-params">()</span></span>&#123;   <br> <br>        System.out.println(<span class="hljs-string">"睡觉前要脱衣服!"</span>);   <br> <br>    &#125;   <br> <br>      <br>    <span class="hljs-meta">@AfterReturning</span>(<span class="hljs-string">"sleeppoint()"</span>)   <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">afterSleep</span><span class="hljs-params">()</span></span>&#123;   <br> <br>        System.out.println(<span class="hljs-string">"睡醒了要穿衣服！"</span>);   <br> <br>    &#125;   <br> <br>&#125;<br></code></pre></td></tr></table></figure>

<p>Spring只使用了aspectJ的注解，并不需要引入aspecJ的其他依赖。</p>
</li>
</ul>
<h4 id="切点表达式"><a href="#切点表达式" class="headerlink" title="切点表达式"></a>切点表达式</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">execution(<span class="hljs-tag">&lt;<span class="hljs-name">修饰符模式</span>&gt;</span>? <span class="hljs-tag">&lt;<span class="hljs-name">返回类型模式</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">方法名模式</span>&gt;</span>(<span class="hljs-tag">&lt;<span class="hljs-name">参数模式</span>&gt;</span>) <span class="hljs-tag">&lt;<span class="hljs-name">异常模式</span>&gt;</span>?)<br></code></pre></td></tr></table></figure>

<p>除了返回类型模式、方法名模式和参数模式外，其它项都是可选的。</p>
<p>修饰符模式指的是public、private、protected，异常模式指的是NullPointException等。</p>
<p><strong>通配符</strong></p>
<figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autohotkey">*`通配符，该通配符主要用于匹配单个单词，或者是以某个词为前缀或后缀的单词。<br></code></pre></td></tr></table></figure>

<figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs coq">.. 通配符，该通配符表示<span class="hljs-number">0</span>个或多个项，主要用于declaring-type-<span class="hljs-built_in">pattern</span>和param-<span class="hljs-built_in">pattern</span>中，如果用于declaring-type-<span class="hljs-built_in">pattern</span>中，则表示匹配当前包及其子包，如果用于param-<span class="hljs-built_in">pattern</span>中，则表示匹配<span class="hljs-number">0</span>个或多个参数。<br></code></pre></td></tr></table></figure>

<p>可以使用&amp;&amp;、||、!、三种运算符来组合切点表达式，表示与或非的关系。</p>
<h2 id="SpringMVC"><a href="#SpringMVC" class="headerlink" title="SpringMVC"></a>SpringMVC</h2><h3 id="SpringMVC运行原理"><a href="#SpringMVC运行原理" class="headerlink" title="SpringMVC运行原理"></a>SpringMVC运行原理</h3><p><img src="../img/70.png" srcset="/img/loading.gif" alt="img"></p>
<p>流程说明：</p>
<p>（1）客户端（浏览器）发送请求，直接请求到DispatcherServlet（前端控制器）。</p>
<p>（2）DispatcherServlet根据请求信息调用HandlerMapping，解析请求对应的Handler。</p>
<p>（3）解析到对应的Handler后，开始由HandlerAdapter适配器处理。</p>
<p>（4）HandlerAdapter会根据Handler来调用真正的处理器开处理请求，并处理相应的业务逻辑。</p>
<p>（5）处理器处理完业务后，会返回一个ModelAndView对象，Model是返回的数据对象，View是个逻辑上的View。</p>
<p>（6）ViewResolver会根据逻辑View查找实际的View。</p>
<p>（7）DispaterServlet把返回的Model传给View。</p>
<p>（8）通过View返回给请求者（浏览器）</p>
<h2 id="常用注解"><a href="#常用注解" class="headerlink" title="常用注解"></a>常用注解</h2><p><em>@Autowired Spring</em> 容器查找并注入一个bean对象 按类去匹配</p>
<p>@Required 注释应用于 bean 属性的 setter 方法</p>
<p><em>@Qualifier</em> 指定注入一个bean对象 按名字去匹配</p>
<p><em>@Resource</em><br>(1)、@Resource后面没有任何内容，默认通过name属性去匹配bean，找不到再按type去匹配<br>(2)、指定了name或者type则根据指定的类型去匹配bean<br>(3)、指定了name和type则根据指定的name和type去匹配bean，任何一个不匹配都将报错</p>
<p><em>@Configuration</em>  带有 @Configuration 的注解类表示这个类可以使用 Spring IoC 容器作为 bean 定义的来源</p>
<p>@import 注解允许从另一个配置类中加载 @Bean 定义。</p>
<p><em>@Bean</em>  @Bean 注解告诉 Spring，一个 @Bean 的注解方法将返回一个对象，该对象应该被注册为在 Spring 应用程序上下文中的 bean。 </p>
<p><em>@Scope</em>(“”)设置bean的作用域</p>
<p><em>@Component/@Repository/@Service/@Controller</em><br>Component 通用bean<br>Repository 对应数据访问层Bean<br>Service 对应业务逻辑层bean<br>Controller 对应表现层的Bean</p>
<p>@refrence与@resource </p>
<p>@ComponentScan 启动组件扫描，默认扫描同一包下的组件</p>
<p>前者是dubbo注解，后者是spring 的。后者@resource很简单就是注入资源，与@Autowired比较接近，只不过是按照变量名（beanid）注入。@reference也是注入，但是一般用来注入分布式的远程服务对象，需要配合dubbo配置使用。他们的区别就是一个是本地spring容器，另一个是把远程服务对象当做spring容器中的对象一样注入。</p>
<h2 id="java注解"><a href="#java注解" class="headerlink" title="java注解"></a>java注解</h2><p>注解定义，注解是什么</p>
<p>源代码的元数据，代码标签，</p>
<p>附属品依赖于其他元素（方法，类，属性）</p>
<p>本身没有任何作用，由外部程序解析产生作用</p>
<p>注解携带的信息，对于不同修饰的对象有不同的意义，对于类而言，注解相当于类实现的一个接口，对于方法而言，注解相当于一个变量，对于属性而言，注解相当于一个值。</p>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0-Java/">框架学习 Java</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" target="_blank" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！</p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2020/01/10/%E6%A1%86%E6%9E%B6/mybatisGenerator/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">mybatis Genrator</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2020/01/01/%E5%85%B6%E4%BB%96/UML%E7%B1%BB%E5%9B%BE/">
                        <span class="hidden-mobile">UML类图</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
    Copyright © 2019-2021 <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  

  
  <!-- 备案信息 -->
  <div class="beian">
    <span>
      <a href="http://beian.miit.gov.cn/" target="_blank" rel="nofollow noopener">
        浙ICP备18020003号-1
      </a>
    </span>
    
  </div>


  
</footer>

<!-- SCRIPTS -->

  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.0/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js" ></script>






  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    (function () {
      var path = "/local-search.xml";
      var inputArea = document.querySelector("#local-search-input");
      inputArea.onclick = function () {
        searchFunc(path, 'local-search-input', 'local-search-result');
        this.onclick = null
      }
    })()
  </script>















<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>



</body>
</html>
